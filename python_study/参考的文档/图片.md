# Pythonå›¾ç‰‡å¤„ç†è‡ªåŠ¨åŒ–æŒ‡å—

## ç¯å¢ƒå‡†å¤‡

é¦–å…ˆå®‰è£…å¿…è¦çš„Pythonåº“:

```bash
pip install Pillow
pip install pathlib
```

> æ¸©é¦¨æç¤ºï¼šç”¨ pathlib å¤„ç†æ–‡ä»¶è·¯å¾„æ¯”ä¼ ç»Ÿçš„ os æ¨¡å—ä¼˜é›…å¤šäº†ï¼Œç”¨äº†å°±çŸ¥é“ï¼

## æ‰¹é‡é‡å‘½å

### å›¾ç‰‡æ‰¹é‡é‡å‘½åå·¥å…·

```python
from pathlib import Path

def batch_rename(folder_path, prefix="IMG_"):
    # åˆ›å»ºç›®å½•å¯¹è±¡
    folder = Path(folder_path)
    
    # éå†æ‰€æœ‰å›¾ç‰‡æ–‡ä»¶
    for idx, img_path in enumerate(folder.glob("*.jpg")):
        # æ–°åå­—ï¼šå‰ç¼€ + åºå·ï¼Œä¾‹å¦‚ï¼šIMG_001.jpg
        new_name = f"{prefix}{idx:03d}{img_path.suffix}"
        # é‡å‘½å
        img_path.rename(folder / new_name)
        print(f"å·²é‡å‘½å: {img_path.name} -> {new_name}")

# ä½¿ç”¨ç¤ºä¾‹
batch_rename("æˆ‘çš„ç…§ç‰‡é›†")
```

## å›¾ç‰‡å°ºå¯¸å¤„ç†

### æ‰¹é‡è°ƒæ•´å›¾ç‰‡å°ºå¯¸

```python
from PIL import Image
from pathlib import Path

def resize_images(folder_path, max_size=800):
    folder = Path(folder_path)
    # åˆ›å»ºè¾“å‡ºæ–‡ä»¶å¤¹
    output_folder = folder / "å·²è°ƒæ•´"
    output_folder.mkdir(exist_ok=True)
    
    for img_path in folder.glob("*.jpg"):
        # æ‰“å¼€å›¾ç‰‡
        with Image.open(img_path) as img:
            # è®¡ç®—æ–°å°ºå¯¸ï¼Œä¿æŒæ¯”ä¾‹
            ratio = max_size / max(img.size)
            if ratio < 1:  # åªç¼©å°ï¼Œä¸æ”¾å¤§
                new_size = tuple(int(x * ratio) for x in img.size)
                # è°ƒæ•´å¤§å°å¹¶ä¿å­˜
                img_resized = img.resize(new_size, Image.Resampling.LANCZOS)
                save_path = output_folder / img_path.name
                img_resized.save(save_path, quality=95)
                print(f"å·²å¤„ç†: {img_path.name}")

# ä½¿ç”¨ç¤ºä¾‹
resize_images("åº¦å‡ç…§ç‰‡")
```

## å›¾ç‰‡å‹ç¼©

### æ‰¹é‡å‹ç¼©å›¾ç‰‡

```python
from PIL import Image
from pathlib import Path

def compress_images(folder_path, quality=80):
    folder = Path(folder_path)
    # åˆ›å»ºå‹ç¼©åçš„æ–‡ä»¶å¤¹
    compressed_folder = folder / "å·²å‹ç¼©"
    compressed_folder.mkdir(exist_ok=True)
    
    for img_path in folder.glob("*.jpg"):
        # æ‰“å¼€å¹¶å‹ç¼©
        with Image.open(img_path) as img:
            save_path = compressed_folder / img_path.name
            # å‹ç¼©ä¿å­˜
            img.save(save_path, "JPEG", quality=quality, optimize=True)
            
            # æ˜¾ç¤ºå‹ç¼©æ•ˆæœ
            original_size = img_path.stat().st_size / 1024  # KB
            compressed_size = save_path.stat().st_size / 1024  # KB
            ratio = (1 - compressed_size/original_size) * 100
            print(f"{img_path.name}: {original_size:.1f}KB -> {compressed_size:.1f}KB "
                  f"(èŠ‚çœ{ratio:.1f}%)")

# ä½¿ç”¨ç¤ºä¾‹
compress_images("æ‰‹æœºç›¸å†Œ")
```

## ç…§ç‰‡æ•´ç†å·¥å…·

### æŒ‰æ‹æ‘„æ—¶é—´è‡ªåŠ¨åˆ†ç±»

```python
from PIL import Image
from pathlib import Path
from datetime import datetime

def organize_photos(folder_path):
    folder = Path(folder_path)
    
    # éå†æ‰€æœ‰å›¾ç‰‡
    for img_path in folder.glob("*.jpg"):
        try:
            # è·å–ç…§ç‰‡æ‹æ‘„æ—¶é—´
            with Image.open(img_path) as img:
                if hasattr(img, '_getexif') and img._getexif():
                    exif = img._getexif()
                    if 36867 in exif:  # æ‹æ‘„æ—¶é—´çš„EXIFæ ‡ç­¾
                        date_str = exif[36867]
                        date_obj = datetime.strptime(date_str, '%Y:%m:%d %H:%M:%S')
                        # æŒ‰å¹´æœˆå»ºæ–‡ä»¶å¤¹
                        year_month = date_obj.strftime('%Y-%m')
                        new_folder = folder / year_month
                        new_folder.mkdir(exist_ok=True)
                        # ç§»åŠ¨æ–‡ä»¶
                        img_path.rename(new_folder / img_path.name)
                        print(f"å·²ç§»åŠ¨ {img_path.name} åˆ° {year_month}")
                    
        except Exception as e:
            print(f"å¤„ç† {img_path.name} æ—¶å‡ºé”™: {e}")

# ä½¿ç”¨ç¤ºä¾‹
organize_photos("æ‰€æœ‰ç…§ç‰‡")
```

## ç»¼åˆå¤„ç†å·¥å…·

### ä¸€é”®å¤„ç†æ‰€æœ‰æ“ä½œ

```python
def photo_processor(folder_path):
    print("ğŸš€ å¼€å§‹å¤„ç†å›¾ç‰‡...")
    
    # å…ˆæ•´ç†åˆ†ç±»
    print("\nğŸ“‚ æ­£åœ¨æ•´ç†ç…§ç‰‡...")
    organize_photos(folder_path)
    
    # ç»Ÿä¸€è°ƒæ•´å¤§å°
    print("\nğŸ“ æ­£åœ¨è°ƒæ•´å°ºå¯¸...")
    resize_images(folder_path)
    
    # æœ€åå‹ç¼©
    print("\nğŸ—œï¸ æ­£åœ¨å‹ç¼©å›¾ç‰‡...")
    compress_images(folder_path)
    
    print("\nâœ¨ æ‰€æœ‰æ“ä½œå·²å®Œæˆï¼")

# ä¸€é”®å¯åŠ¨
photo_processor("æˆ‘çš„ç›¸å†Œ")
```

## ä½¿ç”¨æ³¨æ„äº‹é¡¹

1. å¤„ç†ä¹‹å‰æœ€å¥½å…ˆå¤‡ä»½ï¼Œé¿å…æ„å¤–æƒ…å†µ
2. å‹ç¼©è´¨é‡å»ºè®®è®¾åœ¨ 75-85 ä¹‹é—´ï¼Œå†ä½å›¾ç‰‡å°±ç³Šäº†
3. æ‰¹é‡å¤„ç†æ—¶æ³¨æ„å†…å­˜å ç”¨ï¼Œæ–‡ä»¶å¤ªå¤šå»ºè®®åˆ†æ‰¹å¤„ç†
4. å»ºè®®å°†è¿™äº›ä»£ç ä¿å­˜æˆè„šæœ¬ï¼Œéœ€è¦æ—¶éšæ—¶è°ƒç”¨