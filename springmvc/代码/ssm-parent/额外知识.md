
# 自动配置完整流程
```markdown
1. 导入 starter, 就会导入 autoconfigure 包。
2. autoconfigure 包里面有一个文件 META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports, 里面指定的所有启动要加载的自动配置类。
3. @EnableAutoConfiguration 会自动的把上面文件里面写的所有自动配置类都导入进来。xxxAutoConfiguration 是有条件注解进行按需加载。
4. xxxAutoConfiguration 给容器中导入一堆组件, 组件都是从 xxxProperties 中提取属性值。
5. xxxProperties 又是和配置文件进行了绑定。
效果: 导入 starter、修改配置文件, 就能修改底层行为。
```
# 自动配置的初步理解
SpringBoot默认约定：用户配了的用用户的，没配的用默认的
文档：https://docs.spring.io/spring-boot/appendix/application-properties/index.html#appendix.application-properties.templating
## 自动配置
导入场景，容器中就会自动配置好这个场景的核心组件
如导入spring-boot-starter-web，容器中就会自动配置好Tomcat、SpringMvC、DataSource等
不喜欢的组件可以自行配置进行替换：
默认用的数据源：HikariDataSource
换成Druid数据源：
```markdown
1. 在 application.yml 中添加 spring.datasource.type=com.alibaba.druid.pool.DruidDataSource
2. 在config包下新建一个配置类，使用@Bean注解将Druid数据源注入到容器中
@Configuration
public class DataSourceConfig {
    @Value("${spring.datasource.username}")
    private String username;
    @Value("${spring.datasource.password}")
    private String password;
    @Value("${spring.datasource.url}")
    private String url;
    @Value("${spring.datasource.driverClassName}")
    private String driverClassName;

    @Bean
    DataSource dataSource() {
        DruidDataSource dataSource = new DruidDataSource();
        dataSource.setUsername(username);
        dataSource.setPassword(password);
        dataSource.setUrl(url);
        dataSource.setDriverClassName(driverClassName);
        // ... 配置其他 dataSource 属性
        return dataSource;
    }
}
```
## 默认的包扫描规则
SpringBoot只会扫描主程序所在的包及其下面的子包






